{% extends 'base.html' %}
{% block title %}Menu{% endblock %}

{% block content %}

<h1 class="page-title">Menu</h1>

<div class="shop-layout">

    <!-- PRODUCTS -->
    <div class="products-grid">
        {% for p in products %}
        <div class="product-card">

            {% if p.image %}
                <img src="{{ p.image.url }}" alt="{{ p.name }}" class="product-img">
            {% endif %}

            <h3>{{ p.name }}</h3>
            <p class="price">${{ p.price }}</p>

            <form method="POST" action="{% url 'add_to_cart' %}">
                {% csrf_token %}
                <input type="hidden" name="product_id" value="{{ p.id }}">
                <button class="btn">Add to cart</button>
            </form>

        </div>
        {% endfor %}
    </div>

    <!-- CART PREVIEW -->
    <div class="cart-preview">
        <h2>Invoice</h2>

        {% for item in items %}
        <p>
            {{ item.product.name }} Ã— {{ item.quantity }}
            <b>${{ item.subtotal }}</b>
        </p>
        {% empty %}
        <p>No items yet</p>
        {% endfor %}

        <h3>Total: ${{ total }}</h3>

        <a href="{% url 'cart' %}" class="btn secondary">
            View cart
        </a>
    </div>

</div>

{% endblock %}
